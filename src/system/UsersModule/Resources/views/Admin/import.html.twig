{{ render(controller('ZikulaAdminModule:Admin:adminheader')) }}
<h3>
    <span class="fa fa-upload"></span>
    {{ __('Import users') }}
</h3>

{% if importResults != '' %}
<div class="alert alert-danger">
    {{ importResults }}
</div>
{% endif %}

<form class="form-horizontal" role="form" action="{{ path('zikulausersmodule_admin_import') }}" method="post" enctype="multipart/form-data">
    <div>
        <input type="hidden" name="confirmed" value="1" />
        <input type="hidden" name="csrftoken" value="{insert name='csrftoken'}" />
        <fieldset>
            <legend>{{ __('Select the CSV file') }}</legend>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="users_import">{{ __f('CSV file (Max. %sub%)', {"%sub%": post_max_size}) }}</label>
                <div class="col-sm-9">
                <input id="users_import" type="file" name="importFile" size="30" />
                <em class="help-block sub">{{ __('The file must be utf8 encoded.') }}</em>
            </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="users_import_delimiter">{{ __('CSV delimiter') }}</label>
                <div class="col-sm-9">
                <select class="form-control" id="users_import_delimiter" name="delimiter">
                    <option value="1">Comma (,)</option>
                    <option value="2">Semicolon (;)</option>
                    <option value="3">Colon (:)</option>
                </select>
            </div>
        </div>
        </fieldset>
        <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9">
                {button class="btn btn-success" __alt='Import' __title='Import' __text='Import'}
                <a class="btn btn-danger" href="{{ path('zikulausersmodule_admin_view') }}" title="{{ __('Cancel') }}">{{ __('Cancel') }}</a>
            </div>
        </div>
    </div>
</form>

<div class="alert alert-info">
    <h4>{{ __('About the CSV file') }}</h4>
    <dl>
        <dt>{{ __('The first row of the CSV file must contain the field names. It must be like this:') }}</dt>
        <dd>uname,pass,email,activated,sendmail,groups</dd>
    </dl>
    <dl>
        <dt>{{ __('where:') }}</dt>

        <dd>* uname{{ __(' (mandatory) - The user name. This value must be unique.') }}</dd>
        <dd>* pass{{ __f(' (mandatory) - The user password. It must have %sub% characters or more. Preferentially containing letters and numbers.', {"%sub%": modvars.ZikulaUsersModule.minpass}) }}</dd>
        <dd>* email{{ __(' (mandatory) - The user email. If the validation method is based on the user email this value must be unique.') }}</dd>
        <dd>* activated{{ __(' - Type 0 if user is not active, 1 if the user must be active. The default value is 1.') }}</dd>
        <dd>* sendmail{{ __(' - Type 1 if the system must send the password to the user via email and 0 otherwise. The default value is 1. The module Mailer must be active and correctly configured. The email is sent only if user activated value is upper than 0.') }}</dd>
        <dd>* groups{{ __f(' - The identities of the groups where the user must belong separated by the character |. If you do not specify any group, the default group is %sub%.', {"%sub%": defaultGroup}) }}</dd>
    </dl>
    <dl>
        <dt>{{ __('An example of a valid CSV file') }}</dt>
        <dd>uname,pass,email,activated,sendmail,groups</dd>
        <dd>{{ __('albert,12secure09,albert@example.org,1,1,2') }}</dd>
        <dd>{{ __('george,lesssecure,george@example.org,1,0,1|5') }}</dd>
        <dd>{{ __('robert,hispassword,robert@example.org,,,') }}</dd>
    </dl>
    <dl>
        <dt>{{ __('Another example of a valid CSV file') }}</dt>
        <dd>uname,pass,email</dd>
        <dd>{{ __('albert,12secure09,albert@example.org') }}</dd>
        <dd>{{ __('george,lesssecure,george@example.org') }}</dd>
        <dd>{{ __('robert,hispassword,robert@example.org') }}</dd>
    </dl>
</div>
{{ render(controller('ZikulaAdminModule:Admin:adminfooter')) }}