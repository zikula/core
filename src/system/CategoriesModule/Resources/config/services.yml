services:
    zikula_categories_module.container.link_container:
        class: Zikula\CategoriesModule\Container\LinkContainer
        arguments: ["@translator.default", "@router", "@zikula_permissions_module.api.permission", "@zikula_extensions_module.api.variable", "@request_stack"]
        tags:
            - { name: zikula.link_container }

    zikula_categories_module.api.category:
        class: Zikula\CategoriesModule\Api\CategoryApi
        arguments:
          - "@translator.default"
          - "@doctrine.orm.entity_manager"
          - "@request_stack"
          - "@zikula_permissions_module.api.permission"
          - "@zikula_categories_module.category_processing_helper"
          - "@zikula_categories_module.category_sorting_helper"
          - "@zikula_categories_module.relative_category_path_builder_helper"
          - "@zikula_settings_module.locale_api"

    zikula_categories_module.api.category_permission:
        class: Zikula\CategoriesModule\Api\CategoryPermissionApi
        arguments: ["@zikula_permissions_module.api.permission", "@zikula_extensions_module.api.variable"]

    zikula_categories_module.api.category_registry:
        class: Zikula\CategoriesModule\Api\CategoryRegistryApi
        arguments: ["@translator.default", "@doctrine.orm.entity_manager", "@zikula_categories_module.api.category"]

    zikula_categories_module.api.user_categories:
        class: Zikula\CategoriesModule\Api\UserCategoriesApi
        arguments: ["@translator.default", "@zikula_categories_module.api.category", "@zikula_users_module.current_user"]

    zikula_categories_module.category_processing_helper:
        class: Zikula\CategoriesModule\Helper\CategoryProcessingHelper
        arguments: ["@translator.default", "@doctrine.orm.entity_manager", "@kernel", "@zikula_settings_module.locale_api"]

    zikula_categories_module.category_sorting_helper:
        class: Zikula\CategoriesModule\Helper\CategorySortingHelper
        arguments: ["@request_stack"]

    zikula_categories_module.copy_and_move_helper:
        class: Zikula\CategoriesModule\Helper\CopyAndMoveHelper
        arguments: ["@translator.default", "@doctrine.orm.entity_manager", "@zikula_categories_module.api.category", "@zikula_categories_module.path_builder_helper"]

    zikula_categories_module.hierarchy_helper:
        class: Zikula\CategoriesModule\Helper\HierarchyHelper
        arguments: ["@translator.default", "@doctrine.orm.entity_manager", "@zikula_categories_module.api.category"]

    zikula_categories_module.html_tree_helper:
        class: Zikula\CategoriesModule\Helper\HtmlTreeHelper
        arguments: ["@translator.default", "@router", "@request_stack"]

    zikula_categories_module.js_tree_helper:
        class: Zikula\CategoriesModule\Helper\JsTreeHelper
        arguments: ["@translator.default", "@router", "@request_stack"]

    zikula_categories_module.path_builder_helper:
        class: Zikula\CategoriesModule\Helper\PathBuilderHelper
        arguments: ["@doctrine.orm.entity_manager", "@zikula_categories_module.api.category", "@zikula_categories_module.relative_category_path_builder_helper"]

    zikula_categories_module.relative_category_path_builder_helper:
        class: Zikula\CategoriesModule\Helper\RelativeCategoryPathBuilderHelper

    zikula_categories_module.form_type.categories_type:
        class: Zikula\CategoriesModule\Form\Type\CategoriesType
        arguments: ["@zikula_categories_module.api.category_registry"]
        tags:
            - { name: form.type }

    zikula_categories_module.form_type.category_tree_type:
        class: Zikula\CategoriesModule\Form\Type\CategoryTreeType
        arguments: ["@zikula_categories_module.api.category"]
        tags:
            - { name: form.type }

    zikula_categories_module.form_type.config_type:
        class: Zikula\CategoriesModule\Form\Type\ConfigType
        arguments: ["@zikula_categories_module.api.category"]
        tags:
            - { name: form.type }

    twig.extension.zikula_categories_module:
        class: Zikula\CategoriesModule\Twig\Extension\CategoriesExtension
        public: true
        arguments: ["@request_stack", "@zikula_categories_module.api.category", "@zikula_categories_module.html_tree_helper"]
        tags:
            - { name: twig.extension }
