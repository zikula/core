/*!
 * jQuery contextMenu - Plugin for simple contextMenu handling
 *
 * Version: git-master
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(c,d){c.support.htmlMenuitem=("HTMLMenuItemElement" in window);c.support.htmlCommand=("HTMLCommandElement" in window);c.support.eventSelectstart=("onselectstart" in document.documentElement);if(!c.ui||!c.ui.widget){var q=c.cleanData;c.cleanData=function(s){for(var t=0,u;(u=s[t])!=null;t++){try{c(u).triggerHandler("remove")}catch(v){}}q(s)}}var p=null,b=false,n=c(window),h=0,g={},l={},k={},i={selector:null,appendTo:null,trigger:"right",autoHide:false,delay:200,determinePosition:function(s){if(c.ui&&c.ui.position){s.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none")}else{var t=this.offset();t.top+=this.outerHeight();t.left+=this.outerWidth()/2-s.outerWidth()/2;s.css(t)}},position:function(u,A,z){var w=this,v;if(!A&&!z){u.determinePosition.call(this,u.$menu);return}else{if(A==="maintain"&&z==="maintain"){v=u.$menu.position()}else{v={top:z,left:A}}}var s=n.scrollTop()+n.height(),B=n.scrollLeft()+n.width(),C=u.$menu.height(),t=u.$menu.width();if(v.top+C>s){v.top-=C}if(v.left+t>B){v.left-=t}u.$menu.css(v)},positionSubmenu:function(s){if(c.ui&&c.ui.position){s.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","")}else{var t={top:0,left:this.outerWidth()};s.css(t)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:c.noop,hide:c.noop},callback:null,items:{}},j={timer:null,pageX:null,pageY:null},e=function(u){var t=0,s=u;while(true){t=Math.max(t,parseInt(s.css("z-index"),10)||0);s=s.parent();if(!s||!s.length||"html body".indexOf(s.prop("nodeName").toLowerCase())>-1){break}}return t},r={abortevent:function(s){s.preventDefault();s.stopImmediatePropagation()},contextmenu:function(u){var t=c(this);u.preventDefault();u.stopImmediatePropagation();if(u.data.trigger!="right"&&u.originalEvent){return}if(!t.hasClass("context-menu-disabled")){p=t;if(u.data.build){var s=u.data.build(p,u);if(s===false){return}u.data=c.extend(true,{},i,u.data,s||{});if(!u.data.items||c.isEmptyObject(u.data.items)){if(window.console){(console.error||console.log)("No items specified to show in contextMenu")}throw new Error("No Items sepcified")}u.data.$trigger=p;f.create(u.data)}f.show.call(t,u.data,u.pageX,u.pageY)}},click:function(s){s.preventDefault();s.stopImmediatePropagation();c(this).trigger(c.Event("contextmenu",{data:s.data,pageX:s.pageX,pageY:s.pageY}))},mousedown:function(t){var s=c(this);if(p&&p.length&&!p.is(s)){p.data("contextMenu").$menu.trigger("contextmenu:hide")}if(t.button==2){p=s.data("contextMenuActive",true)}},mouseup:function(t){var s=c(this);if(s.data("contextMenuActive")&&p&&p.length&&p.is(s)&&!s.hasClass("context-menu-disabled")){t.preventDefault();t.stopImmediatePropagation();p=s;s.trigger(c.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))}s.removeData("contextMenuActive")},mouseenter:function(u){var t=c(this),s=c(u.relatedTarget),v=c(document);if(s.is(".context-menu-list")||s.closest(".context-menu-list").length){return}if(p&&p.length){return}j.pageX=u.pageX;j.pageY=u.pageY;j.data=u.data;v.on("mousemove.contextMenuShow",r.mousemove);j.timer=setTimeout(function(){j.timer=null;v.off("mousemove.contextMenuShow");p=t;t.trigger(c.Event("contextmenu",{data:j.data,pageX:j.pageX,pageY:j.pageY}))},u.data.delay)},mousemove:function(s){j.pageX=s.pageX;j.pageY=s.pageY},mouseleave:function(t){var s=c(t.relatedTarget);if(s.is(".context-menu-list")||s.closest(".context-menu-list").length){return}try{clearTimeout(j.timer)}catch(t){}j.timer=null},layerClick:function(v){var z=c(this),B=z.data("contextMenuRoot"),t=false,u=v.button,C=v.pageX,A=v.pageY,w,s,D;v.preventDefault();v.stopImmediatePropagation();setTimeout(function(){var E,y,x;if((B.trigger=="left"&&u==0)||(B.trigger=="right"&&u==2)){if(document.elementFromPoint){B.$layer.hide();w=document.elementFromPoint(C-n.scrollLeft(),A-n.scrollTop());B.$layer.show();if(B.$trigger.is(w)||B.$trigger.has(w).length){B.position.call(B.$trigger,B,C,A);return}}else{s=B.$trigger.offset();E=c(window);s.top+=E.scrollTop();if(s.top<=v.pageY){s.left+=E.scrollLeft();if(s.left<=v.pageX){s.bottom=s.top+B.$trigger.outerHeight();if(s.bottom>=v.pageY){s.right=s.left+B.$trigger.outerWidth();if(s.right>=v.pageX){B.position.call(B.$trigger,B,C,A);return}}}}}}if(w&&w.length){w.contextMenu({x:C,y:A})}else{B.$menu.trigger("contextmenu:hide")}},50)},keyStop:function(t,s){if(!s.isInput){t.preventDefault()}t.stopPropagation()},key:function(w){var u=p.data("contextMenu")||{};switch(w.keyCode){case 9:case 38:r.keyStop(w,u);if(u.isInput){if(w.keyCode==9&&w.shiftKey){w.preventDefault();u.$selected&&u.$selected.find("input, textarea, select").blur();u.$menu.trigger("prevcommand");return}else{if(w.keyCode==38&&u.$selected.find("input, textarea, select").prop("type")=="checkbox"){w.preventDefault();return}}}else{if(w.keyCode!=9||w.shiftKey){u.$menu.trigger("prevcommand");return}}case 40:r.keyStop(w,u);if(u.isInput){if(w.keyCode==9){w.preventDefault();u.$selected&&u.$selected.find("input, textarea, select").blur();u.$menu.trigger("nextcommand");return}else{if(w.keyCode==40&&u.$selected.find("input, textarea, select").prop("type")=="checkbox"){w.preventDefault();return}}}else{u.$menu.trigger("nextcommand");return}break;case 37:r.keyStop(w,u);if(u.isInput||!u.$selected||!u.$selected.length){break}if(!u.$selected.parent().hasClass("context-menu-root")){var v=u.$selected.parent().parent();u.$selected.trigger("contextmenu:blur");u.$selected=v;return}break;case 39:r.keyStop(w,u);if(u.isInput||!u.$selected||!u.$selected.length){break}var t=u.$selected.data("contextMenu")||{};if(t.$menu&&u.$selected.hasClass("context-menu-submenu")){u.$selected=null;t.$selected=null;t.$menu.trigger("nextcommand");return}break;case 35:case 36:if(u.$selected&&u.$selected.find("input, textarea, select").length){return}else{(u.$selected&&u.$selected.parent()||u.$menu).children(":not(.disabled, .not-selectable)")[w.keyCode==36?"first":"last"]().trigger("contextmenu:focus");w.preventDefault();return}break;case 13:r.keyStop(w,u);if(u.isInput){if(u.$selected&&!u.$selected.is("textarea, select")){w.preventDefault();return}break}u.$selected&&u.$selected.trigger("mouseup");return;case 32:case 33:case 34:r.keyStop(w,u);return;case 27:r.keyStop(w,u);u.$menu.trigger("contextmenu:hide");return;default:var s=(String.fromCharCode(w.keyCode)).toUpperCase();if(u.accesskeys[s]){u.accesskeys[s].$node.trigger(u.accesskeys[s].$menu?"contextmenu:focus":"mouseup");return}break}w.stopPropagation();u.$selected&&u.$selected.trigger(w)},prevItem:function(w){w.stopPropagation();var v=c(this).data("contextMenu")||{};if(v.$selected){var s=v.$selected;v=v.$selected.parent().data("contextMenu")||{};v.$selected=s}var u=v.$menu.children(),t=!v.$selected||!v.$selected.prev().length?u.last():v.$selected.prev(),y=t;while(t.hasClass("disabled")||t.hasClass("not-selectable")){if(t.prev().length){t=t.prev()}else{t=u.last()}if(t.is(y)){return}}if(v.$selected){r.itemMouseleave.call(v.$selected.get(0),w)}r.itemMouseenter.call(t.get(0),w);var x=t.find("input, textarea, select");if(x.length){x.focus()}},nextItem:function(w){w.stopPropagation();var v=c(this).data("contextMenu")||{};if(v.$selected){var s=v.$selected;v=v.$selected.parent().data("contextMenu")||{};v.$selected=s}var u=v.$menu.children(),t=!v.$selected||!v.$selected.next().length?u.first():v.$selected.next(),y=t;while(t.hasClass("disabled")||t.hasClass("not-selectable")){if(t.next().length){t=t.next()}else{t=u.first()}if(t.is(y)){return}}if(v.$selected){r.itemMouseleave.call(v.$selected.get(0),w)}r.itemMouseenter.call(t.get(0),w);var x=t.find("input, textarea, select");if(x.length){x.focus()}},focusInput:function(w){var v=c(this).closest(".context-menu-item"),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;s.$selected=t.$selected=v;s.isInput=t.isInput=true},blurInput:function(w){var v=c(this).closest(".context-menu-item"),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;s.isInput=t.isInput=false},menuMouseenter:function(t){var s=c(this).data().contextMenuRoot;s.hovering=true},menuMouseleave:function(t){var s=c(this).data().contextMenuRoot;if(s.$layer&&s.$layer.is(t.relatedTarget)){s.hovering=false}},itemMouseenter:function(w){var v=c(this),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;s.hovering=true;if(w&&s.$layer&&s.$layer.is(w.relatedTarget)){w.preventDefault();w.stopImmediatePropagation()}(t.$menu?t:s).$menu.children(".hover").trigger("contextmenu:blur");if(v.hasClass("disabled")||v.hasClass("not-selectable")){t.$selected=null;return}v.trigger("contextmenu:focus")},itemMouseleave:function(w){var v=c(this),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;if(s!==t&&s.$layer&&s.$layer.is(w.relatedTarget)){s.$selected&&s.$selected.trigger("contextmenu:blur");w.preventDefault();w.stopImmediatePropagation();s.$selected=t.$selected=t.$node;return}v.trigger("contextmenu:blur")},itemClick:function(x){var w=c(this),v=w.data(),u=v.contextMenu,s=v.contextMenuRoot,t=v.contextMenuKey,y;if(!u.items[t]||w.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){return}x.preventDefault();x.stopImmediatePropagation();if(c.isFunction(s.callbacks[t])&&Object.prototype.hasOwnProperty.call(s.callbacks,t)){y=s.callbacks[t]}else{if(c.isFunction(s.callback)){y=s.callback}else{return}}if(y.call(s.$trigger,t,s)!==false){s.$menu.trigger("contextmenu:hide")}else{if(s.$menu.parent().length){f.update.call(s.$trigger,s)}}},inputClick:function(s){s.stopImmediatePropagation()},hideMenu:function(u,t){var s=c(this).data("contextMenuRoot");f.hide.call(s.$trigger,s,t&&t.force)},focusItem:function(w){w.stopPropagation();var v=c(this),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;v.addClass("hover").siblings(".hover").trigger("contextmenu:blur");t.$selected=s.$selected=v;if(t.$node){s.positionSubmenu.call(t.$node,t.$menu)}},blurItem:function(w){w.stopPropagation();var v=c(this),u=v.data(),t=u.contextMenu,s=u.contextMenuRoot;v.removeClass("hover");t.$selected=null}},f={show:function(v,t,z){var s=c(this),w,u={};c("#context-menu-layer").trigger("mousedown");v.$trigger=s;if(v.events.show.call(s,v)===false){p=null;return}f.update.call(s,v);v.position.call(s,v,t,z);if(v.zIndex){u.zIndex=e(s)+v.zIndex}f.layer.call(v.$menu,v,u.zIndex);v.$menu.find("ul").css("zIndex",u.zIndex+1);v.$menu.css(u)[v.animation.show](v.animation.duration);s.data("contextMenu",v).addClass("context-menu-active");c(document).off("keydown.contextMenu").on("keydown.contextMenu",r.key);if(v.autoHide){c(document).on("mousemove.contextMenuAutoHide",function(x){var y=s.offset();y.right=y.left+s.outerWidth();y.bottom=y.top+s.outerHeight();if(v.$layer&&!v.hovering&&(!(x.pageX>=y.left&&x.pageX<=y.right)||!(x.pageY>=y.top&&x.pageY<=y.bottom))){v.$menu.trigger("contextmenu:hide")}})}},hide:function(t,u){var s=c(this);if(!t){t=s.data("contextMenu")||{}}if(!u&&t.events&&t.events.hide.call(s,t)===false){return}s.removeData("contextMenu").removeClass("context-menu-active");if(t.$layer){setTimeout((function(w){return function(){w.remove()}})(t.$layer),10);try{delete t.$layer}catch(v){t.$layer=null}}p=null;t.$menu.find(".hover").trigger("contextmenu:blur");t.$selected=null;c(document).off(".contextMenuAutoHide").off("keydown.contextMenu");t.$menu&&t.$menu[t.animation.hide](t.animation.duration,function(){if(t.build){t.$menu.remove();c.each(t,function(w,x){switch(w){case"ns":case"selector":case"build":case"trigger":return true;default:t[w]=d;try{delete t[w]}catch(y){}return true}})}})},create:function(t,s){if(s===d){s=t}t.$menu=c('<ul class="context-menu-list '+(t.className||"")+'"></ul>').data({contextMenu:t,contextMenuRoot:s});c.each(["callbacks","commands","inputs"],function(v,u){t[u]={};if(!s[u]){s[u]={}}});s.accesskeys||(s.accesskeys={});c.each(t.items,function(w,x){var B=c('<li class="context-menu-item '+(x.className||"")+'"></li>'),u=null,A=null;B.on("click",c.noop);x.$node=B.data({contextMenu:t,contextMenuRoot:s,contextMenuKey:w});if(x.accesskey){var y=m(x.accesskey);for(var v=0,z;z=y[v];v++){if(!s.accesskeys[z]){s.accesskeys[z]=x;x._name=x.name.replace(new RegExp("("+z+")","i"),'<span class="context-menu-accesskey">$1</span>');break}}}if(typeof x=="string"){B.addClass("context-menu-separator not-selectable")}else{if(x.type&&k[x.type]){k[x.type].call(B,x,t,s);c.each([t,s],function(D,C){C.commands[w]=x;if(c.isFunction(x.callback)){C.callbacks[w]=x.callback}})}else{if(x.type=="html"){B.addClass("context-menu-html not-selectable")}else{if(x.type){u=c("<label></label>").appendTo(B);c("<span></span>").html(x._name||x.name).appendTo(u);B.addClass("context-menu-input");t.hasTypes=true;c.each([t,s],function(D,C){C.commands[w]=x;C.inputs[w]=x})}else{if(x.items){x.type="sub"}}}switch(x.type){case"text":A=c('<input type="text" value="1" name="context-menu-input-'+w+'" value="">').val(x.value||"").appendTo(u);break;case"textarea":A=c('<textarea name="context-menu-input-'+w+'"></textarea>').val(x.value||"").appendTo(u);if(x.height){A.height(x.height)}break;case"checkbox":A=c('<input type="checkbox" value="1" name="context-menu-input-'+w+'" value="">').val(x.value||"").prop("checked",!!x.selected).prependTo(u);break;case"radio":A=c('<input type="radio" value="1" name="context-menu-input-'+x.radio+'" value="">').val(x.value||"").prop("checked",!!x.selected).prependTo(u);break;case"select":A=c('<select name="context-menu-input-'+w+'">').appendTo(u);if(x.options){c.each(x.options,function(C,D){c("<option></option>").val(C).text(D).appendTo(A)});A.val(x.selected)}break;case"sub":c("<span></span>").html(x._name||x.name).appendTo(B);x.appendTo=x.$node;f.create(x,s);B.data("contextMenu",x).addClass("context-menu-submenu");x.callback=null;break;case"html":c(x.html).appendTo(B);break;default:c.each([t,s],function(D,C){C.commands[w]=x;if(c.isFunction(x.callback)){C.callbacks[w]=x.callback}});c("<span></span>").html(x._name||x.name||"").appendTo(B);break}if(x.type&&x.type!="sub"&&x.type!="html"){A.on("focus",r.focusInput).on("blur",r.blurInput);if(x.events){A.on(x.events,t)}}if(x.icon){B.addClass("icon icon-"+x.icon)}}}x.$input=A;x.$label=u;B.appendTo(t.$menu);if(!t.hasTypes&&c.support.eventSelectstart){B.on("selectstart.disableTextSelect",r.abortevent)}});if(!t.$node){t.$menu.css("display","none").addClass("context-menu-root")}t.$menu.appendTo(t.appendTo||document.body)},resize:function(s,t){s.css({position:"absolute",display:"block"});s.data("width",Math.ceil(s.width())+1);s.css({position:"static",minWidth:"0px",maxWidth:"100000px"});s.find("> li > ul").each(function(){f.resize(c(this),true)});if(!t){s.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return c(this).data("width")})}},update:function(u,t){var s=this;if(t===d){t=u;f.resize(u.$menu)}u.$menu.children().each(function(){var v=c(this),w=v.data("contextMenuKey"),y=u.items[w],x=(c.isFunction(y.disabled)&&y.disabled.call(s,w,t))||y.disabled===true;v[x?"addClass":"removeClass"]("disabled");if(y.type){v.find("input, select, textarea").prop("disabled",x);switch(y.type){case"text":case"textarea":y.$input.val(y.value||"");break;case"checkbox":case"radio":y.$input.val(y.value||"").prop("checked",!!y.selected);break;case"select":y.$input.val(y.selected||"");break}}if(y.$menu){f.update.call(s,y,t)}})},layer:function(t,u){var s=t.$layer=c('<div id="context-menu-layer" style="position:fixed; z-index:'+u+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:n.height(),width:n.width(),display:"block"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",r.abortevent).on("mousedown",r.layerClick);if(!c.support.fixedPosition){s.css({position:"absolute",height:c(document).height()})}return s}};function m(x){var v=x.split(/\s+/),w=[];for(var u=0,s;s=v[u];u++){s=s[0].toUpperCase();w.push(s)}return w}c.fn.contextMenu=function(s){if(s===d){this.first().trigger("contextmenu")}else{if(s.x&&s.y){this.first().trigger(c.Event("contextmenu",{pageX:s.x,pageY:s.y}))}else{if(s==="hide"){var t=this.data("contextMenu").$menu;t&&t.trigger("contextmenu:hide")}else{if(s==="destroy"){c.contextMenu("destroy",{context:this})}else{if(c.isPlainObject(s)){s.context=this;c.contextMenu("create",s)}else{if(s){this.removeClass("context-menu-disabled")}else{if(!s){this.addClass("context-menu-disabled")}}}}}}}return this};c.contextMenu=function(w,A){if(typeof w!="string"){A=w;w="create"}if(typeof A=="string"){A={selector:A}}else{if(A===d){A={}}}var u=c.extend(true,{},i,A||{});var v=c(document);var y=v;var z=false;if(!u.context||!u.context.length){u.context=document}else{y=c(u.context).first();u.context=y.get(0);z=u.context!==document}switch(w){case"create":if(!u.selector){throw new Error("No selector specified")}if(u.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+u.selector+'" as it contains a reserved className')}if(!u.build&&(!u.items||c.isEmptyObject(u.items))){throw new Error("No Items sepcified")}h++;u.ns=".contextMenu"+h;if(!z){g[u.selector]=u.ns}l[u.ns]=u;if(!u.trigger){u.trigger="right"}if(!b){v.on({"contextmenu:hide.contextMenu":r.hideMenu,"prevcommand.contextMenu":r.prevItem,"nextcommand.contextMenu":r.nextItem,"contextmenu.contextMenu":r.abortevent,"mouseenter.contextMenu":r.menuMouseenter,"mouseleave.contextMenu":r.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",r.inputClick).on({"mouseup.contextMenu":r.itemClick,"contextmenu:focus.contextMenu":r.focusItem,"contextmenu:blur.contextMenu":r.blurItem,"contextmenu.contextMenu":r.abortevent,"mouseenter.contextMenu":r.itemMouseenter,"mouseleave.contextMenu":r.itemMouseleave},".context-menu-item");b=true}y.on("contextmenu"+u.ns,u.selector,u,r.contextmenu);if(z){y.on("remove"+u.ns,function(){c(this).contextMenu("destroy")})}switch(u.trigger){case"hover":y.on("mouseenter"+u.ns,u.selector,u,r.mouseenter).on("mouseleave"+u.ns,u.selector,u,r.mouseleave);break;case"left":y.on("click"+u.ns,u.selector,u,r.click);break}if(!u.build){f.create(u)}break;case"destroy":var s;if(z){var t=u.context;c.each(l,function(B,D){if(D.context!==t){return true}s=c(".context-menu-list").filter(":visible");if(s.length&&s.data().contextMenuRoot.$trigger.is(c(D.context).find(D.selector))){s.trigger("contextmenu:hide",{force:true})}try{if(l[D.ns].$menu){l[D.ns].$menu.remove()}delete l[D.ns]}catch(C){l[D.ns]=null}c(D.context).off(D.ns);return true})}else{if(!u.selector){v.off(".contextMenu .contextMenuAutoHide");c.each(l,function(B,C){c(C.context).off(C.ns)});g={};l={};h=0;b=false;c("#context-menu-layer, .context-menu-list").remove()}else{if(g[u.selector]){s=c(".context-menu-list").filter(":visible");if(s.length&&s.data().contextMenuRoot.$trigger.is(u.selector)){s.trigger("contextmenu:hide",{force:true})}try{if(l[g[u.selector]].$menu){l[g[u.selector]].$menu.remove()}delete l[g[u.selector]]}catch(x){l[g[u.selector]]=null}v.off(g[u.selector])}}}break;case"html5":if((!c.support.htmlCommand&&!c.support.htmlMenuitem)||(typeof A=="boolean"&&A)){c('menu[type="context"]').each(function(){if(this.id){c.contextMenu({selector:"[contextmenu="+this.id+"]",items:c.contextMenu.fromMenu(this)})}}).css("display","none")}break;default:throw new Error('Unknown operation "'+w+'"')}return this};c.contextMenu.setInputValues=function(s,t){if(t===d){t={}}c.each(s.inputs,function(u,v){switch(v.type){case"text":case"textarea":v.value=t[u]||"";break;case"checkbox":v.selected=t[u]?true:false;break;case"radio":v.selected=(t[v.radio]||"")==v.value?true:false;break;case"select":v.selected=t[u]||"";break}})};c.contextMenu.getInputValues=function(s,t){if(t===d){t={}}c.each(s.inputs,function(u,v){switch(v.type){case"text":case"textarea":case"select":t[u]=v.$input.val();break;case"checkbox":t[u]=v.$input.prop("checked");break;case"radio":if(v.$input.prop("checked")){t[v.radio]=v.value}break}});return t};function o(s){return(s.id&&c('label[for="'+s.id+'"]').val())||s.name}function a(u,t,s){if(!s){s=0}t.each(function(){var v=c(this),y=this,z=this.nodeName.toLowerCase(),w,x;if(z=="label"&&v.find("input, textarea, select").length){w=v.text();v=v.children().first();y=v.get(0);z=y.nodeName.toLowerCase()}switch(z){case"menu":x={name:v.attr("label"),items:{}};s=a(x.items,v.children(),s);break;case"a":case"button":x={name:v.text(),disabled:!!v.attr("disabled"),callback:(function(){return function(){v.click()}})()};break;case"menuitem":case"command":switch(v.attr("type")){case d:case"command":case"menuitem":x={name:v.attr("label"),disabled:!!v.attr("disabled"),callback:(function(){return function(){v.click()}})()};break;case"checkbox":x={type:"checkbox",disabled:!!v.attr("disabled"),name:v.attr("label"),selected:!!v.attr("checked")};break;case"radio":x={type:"radio",disabled:!!v.attr("disabled"),name:v.attr("label"),radio:v.attr("radiogroup"),value:v.attr("id"),selected:!!v.attr("checked")};break;default:x=d}break;case"hr":x="-------";break;case"input":switch(v.attr("type")){case"text":x={type:"text",name:w||o(y),disabled:!!v.attr("disabled"),value:v.val()};break;case"checkbox":x={type:"checkbox",name:w||o(y),disabled:!!v.attr("disabled"),selected:!!v.attr("checked")};break;case"radio":x={type:"radio",name:w||o(y),disabled:!!v.attr("disabled"),radio:!!v.attr("name"),value:v.val(),selected:!!v.attr("checked")};break;default:x=d;break}break;case"select":x={type:"select",name:w||o(y),disabled:!!v.attr("disabled"),selected:v.val(),options:{}};v.children().each(function(){x.options[this.value]=c(this).text()});break;case"textarea":x={type:"textarea",name:w||o(y),disabled:!!v.attr("disabled"),value:v.val()};break;case"label":break;default:x={type:"html",html:v.clone(true)};break}if(x){s++;u["key"+s]=x}});return s}c.contextMenu.fromMenu=function(t){var u=c(t),s={};a(s,u.children());return s};c.contextMenu.defaults=i;c.contextMenu.types=k;c.contextMenu.handle=r;c.contextMenu.op=f})(jQuery);